@use '@/styles/variables' as *;

.inlineEdit {
  position: relative;
  display: flex;
  flex: 1;
  align-items: center;
  min-width: 0;
}

.input {
  box-sizing: border-box;
  width: 100%;
  min-width: 0;
  padding: 2px 6px;
  border: 1px solid var(--inline-edit-border);
  border-radius: 3px;
  font-family: $font-family-inter;
  font-size: $font-size-xxsmall;
  font-weight: $font-weight-regular;
  line-height: 1.2;
  color: var(--inline-edit-text);
  background-color: var(--inline-edit-bg);
  box-shadow: var(--inline-edit-shadow);
  transition: all 0.15s ease;

  &:focus {
    border-color: var(--inline-edit-focus-border);
    outline: none;
    background-color: var(--inline-edit-focus-bg);
    box-shadow: var(--inline-edit-focus-shadow);
  }

  &.error {
    border-color: var(--inline-edit-error);
    background-color: var(--inline-edit-error-bg);
    box-shadow: var(--inline-edit-error-shadow);

    &:focus {
      border-color: var(--inline-edit-error);
      box-shadow: var(--inline-edit-error-focus-shadow);
    }
  }

  &.loading {
    background-color: var(--inline-edit-loading-bg);
    opacity: 0.7;
    cursor: wait;
  }

  &:disabled {
    background-color: var(--inline-edit-disabled-bg);
    opacity: 0.6;
    cursor: not-allowed;
  }

  &::placeholder {
    color: var(--inline-edit-placeholder);
    opacity: 0.7;
  }

  &::selection {
    color: var(--inline-edit-selection-text);
    background-color: var(--inline-edit-selection);
  }
}

.errorTooltip {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 1000;
  min-width: 200px;
  margin-top: 4px;
  padding: 8px 10px;
  border: 1px solid var(--inline-edit-error-tooltip-border);
  border-radius: 6px;
  font-size: $font-size-xxxsmall;
  font-weight: $font-weight-medium;
  line-height: 1.3;
  white-space: nowrap;
  color: var(--inline-edit-error-text);
  background-color: var(--inline-edit-error-tooltip-bg);
  box-shadow: var(--inline-edit-error-tooltip-shadow);
  animation: fade-in 0.2s ease;

  &::before {
    content: '';
    position: absolute;
    top: -5px;
    left: 8px;
    width: 0;
    height: 0;
    border-right: 5px solid transparent;
    border-bottom: 5px solid var(--inline-edit-error-tooltip-bg);
    border-left: 5px solid transparent;
  }

  &::after {
    content: '';
    position: absolute;
    top: -6px;
    left: 7px;
    width: 0;
    height: 0;
    border-right: 6px solid transparent;
    border-bottom: 6px solid var(--inline-edit-error-tooltip-border);
    border-left: 6px solid transparent;
  }
}

.loadingSpinner {
  position: absolute;
  top: 50%;
  right: 6px;
  width: 12px;
  height: 12px;
  border: 2px solid var(--inline-edit-loading-spinner-bg);
  border-top: 2px solid var(--inline-edit-loading-spinner);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  transform: translateY(-50%);
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(-4px) scale(0.95);
  }

  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes spin {
  0% {
    transform: translateY(-50%) rotate(0deg);
  }

  100% {
    transform: translateY(-50%) rotate(360deg);
  }
}

// 다크모드/라이트모드 색상 변수
:root {
  // 라이트모드
  --inline-edit-bg: #{$white-2};
  --inline-edit-border: #{$blue-3};
  --inline-edit-focus-bg: #{$white-2};
  --inline-edit-focus-border: #{$blue-1};
  --inline-edit-text: #{$black-1};
  --inline-edit-placeholder: #{$gray-6};
  --inline-edit-shadow: 0 1px 3px rgb(0 0 0 / 8%);
  --inline-edit-focus-shadow:
    0 0 0 1px var(--inline-edit-focus-border), 0 2px 8px rgb(55 79 255 / 15%);
  --inline-edit-selection: #{$blue-3};
  --inline-edit-selection-text: #{$white-2};

  // 에러 상태
  --inline-edit-error: #{$red};
  --inline-edit-error-bg: rgb(220 38 38 / 3%);
  --inline-edit-error-shadow: 0 0 0 1px var(--inline-edit-error);
  --inline-edit-error-focus-shadow:
    0 0 0 1px var(--inline-edit-error), 0 2px 8px rgb(220 38 38 / 20%);
  --inline-edit-error-tooltip-bg: #{$red};
  --inline-edit-error-tooltip-border: #{$red};
  --inline-edit-error-text: #{$white-2};
  --inline-edit-error-tooltip-shadow: 0 4px 12px rgb(0 0 0 / 15%), 0 2px 6px rgb(220 38 38 / 25%);

  // 로딩 상태
  --inline-edit-loading-bg: #{$gray-10};
  --inline-edit-loading-spinner: #{$blue-3};
  --inline-edit-loading-spinner-bg: #{$gray-9};

  // 비활성화 상태
  --inline-edit-disabled-bg: #{$gray-10};
}

:global(.dark) {
  // 다크모드
  --inline-edit-bg: #{$gray-3};
  --inline-edit-border: #{$blue-3};
  --inline-edit-focus-bg: #{$gray-2};
  --inline-edit-focus-border: #{$blue-1};
  --inline-edit-text: #{$white-2};
  --inline-edit-placeholder: #{$gray-6};
  --inline-edit-shadow: 0 1px 3px rgb(0 0 0 / 25%);
  --inline-edit-focus-shadow:
    0 0 0 1px var(--inline-edit-focus-border), 0 2px 8px rgb(55 79 255 / 25%);
  --inline-edit-selection: #{$blue-3};
  --inline-edit-selection-text: #{$white-2};

  // 에러 상태
  --inline-edit-error: #{$red};
  --inline-edit-error-bg: rgb(220 38 38 / 8%);
  --inline-edit-error-shadow: 0 0 0 1px var(--inline-edit-error);
  --inline-edit-error-focus-shadow:
    0 0 0 1px var(--inline-edit-error), 0 2px 8px rgb(220 38 38 / 30%);
  --inline-edit-error-tooltip-bg: #{$red};
  --inline-edit-error-tooltip-border: #{$red};
  --inline-edit-error-text: #{$white-2};
  --inline-edit-error-tooltip-shadow: 0 4px 12px rgb(0 0 0 / 30%), 0 2px 6px rgb(220 38 38 / 40%);

  // 로딩 상태
  --inline-edit-loading-bg: #{$gray-4};
  --inline-edit-loading-spinner: #{$blue-3};
  --inline-edit-loading-spinner-bg: #{$gray-5};

  // 비활성화 상태
  --inline-edit-disabled-bg: #{$gray-4};
}
